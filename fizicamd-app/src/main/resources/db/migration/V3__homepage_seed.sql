-- Create homepage blocks to drive the public landing page content
CREATE TABLE IF NOT EXISTS homepage_blocks (
  id UUID PRIMARY KEY,
  block_type TEXT NOT NULL,
  title TEXT NOT NULL,
  subtitle TEXT NULL,
  description TEXT NULL,
  cta_label TEXT NULL,
  cta_link TEXT NULL,
  media JSONB NOT NULL DEFAULT '{}'::jsonb,
  metadata JSONB NOT NULL DEFAULT '{}'::jsonb,
  sort_order INT NOT NULL DEFAULT 0,
  created_at TIMESTAMPTZ NOT NULL DEFAULT now(),
  updated_at TIMESTAMPTZ NOT NULL DEFAULT now()
);

CREATE INDEX IF NOT EXISTS idx_homepage_block_type ON homepage_blocks(block_type);

-- Seed navigation using the public structure inspired by the legacy site
INSERT INTO navigation_items (id, parent_id, title, slug, type, href, visibility, status, sort_order, icon, payload)
VALUES
  ('11111111-1111-1111-1111-111111111100', NULL, 'Curriculum gimnazial', 'curriculum-gimnazial', 'SECTION', NULL, 'PUBLIC', 'PUBLISHED', 10, 'MenuBook', '{}'::jsonb),
  ('11111111-1111-1111-1111-111111111101', '11111111-1111-1111-1111-111111111100', 'Clasa a VII-a', 'clasa-7', 'PAGE', '/resources/clasa-7', 'PUBLIC', 'PUBLISHED', 11, 'ImportContacts', '{}'::jsonb),
  ('11111111-1111-1111-1111-111111111102', '11111111-1111-1111-1111-111111111100', 'Clasa a VIII-a', 'clasa-8', 'PAGE', '/resources/clasa-8', 'PUBLIC', 'PUBLISHED', 12, 'ImportContacts', '{}'::jsonb),
  ('11111111-1111-1111-1111-111111111200', NULL, 'Curriculum liceal', 'curriculum-liceal', 'SECTION', NULL, 'PUBLIC', 'PUBLISHED', 20, 'AutoStories', '{}'::jsonb),
  ('11111111-1111-1111-1111-111111111201', '11111111-1111-1111-1111-111111111200', 'Clasa a X-a', 'clasa-10', 'PAGE', '/resources/clasa-10', 'PUBLIC', 'PUBLISHED', 21, 'AutoStories', '{}'::jsonb),
  ('11111111-1111-1111-1111-111111111202', '11111111-1111-1111-1111-111111111200', 'Clasa a XI-a', 'clasa-11', 'PAGE', '/resources/clasa-11', 'PUBLIC', 'PUBLISHED', 22, 'AutoStories', '{}'::jsonb),
  ('11111111-1111-1111-1111-111111111203', '11111111-1111-1111-1111-111111111200', 'Clasa a XII-a', 'clasa-12', 'PAGE', '/resources/clasa-12', 'PUBLIC', 'PUBLISHED', 23, 'AutoStories', '{}'::jsonb),
  ('11111111-1111-1111-1111-111111111300', NULL, 'Examene naționale', 'examene', 'SECTION', NULL, 'PUBLIC', 'PUBLISHED', 30, 'Assignment', '{}'::jsonb),
  ('11111111-1111-1111-1111-111111111301', '11111111-1111-1111-1111-111111111300', 'Bacalaureat', 'bacalaureat', 'PAGE', '/resources/bacalaureat', 'PUBLIC', 'PUBLISHED', 31, 'Assignment', '{}'::jsonb),
  ('11111111-1111-1111-1111-111111111302', '11111111-1111-1111-1111-111111111300', 'Evaluare națională', 'evaluare-nationala', 'PAGE', '/resources/evaluare-nationala', 'PUBLIC', 'PUBLISHED', 32, 'Assignment', '{}'::jsonb),
  ('11111111-1111-1111-1111-111111111303', '11111111-1111-1111-1111-111111111300', 'Testări suplimentare', 'testari', 'PAGE', '/resources/testari', 'PUBLIC', 'PUBLISHED', 33, 'Assignment', '{}'::jsonb),
  ('11111111-1111-1111-1111-111111111400', NULL, 'Resurse speciale', 'resurse-speciale', 'SECTION', NULL, 'PUBLIC', 'PUBLISHED', 40, 'Science', '{}'::jsonb),
  ('11111111-1111-1111-1111-111111111401', '11111111-1111-1111-1111-111111111400', 'Experimente video', 'experimente', 'PAGE', '/resources/experimente', 'PUBLIC', 'PUBLISHED', 41, 'Science', '{}'::jsonb),
  ('11111111-1111-1111-1111-111111111402', '11111111-1111-1111-1111-111111111400', 'Probleme și soluții', 'probleme', 'PAGE', '/resources/probleme', 'PUBLIC', 'PUBLISHED', 42, 'Calculate', '{}'::jsonb),
  ('11111111-1111-1111-1111-111111111403', '11111111-1111-1111-1111-111111111400', 'Olimpiade și concursuri', 'olimpiade', 'PAGE', '/resources/olimpiade', 'PUBLIC', 'PUBLISHED', 43, 'EmojiEvents', '{}'::jsonb),
  ('11111111-1111-1111-1111-111111111404', '11111111-1111-1111-1111-111111111400', 'Materiale PDF', 'materiale-pdf', 'PAGE', '/resources/materiale-pdf', 'PUBLIC', 'PUBLISHED', 44, 'PictureAsPdf', '{}'::jsonb),
  ('11111111-1111-1111-1111-111111111500', NULL, 'Comunitate Physics Hub', 'comunitate', 'SECTION', NULL, 'PUBLIC', 'PUBLISHED', 50, 'Diversity3', '{}'::jsonb),
  ('11111111-1111-1111-1111-111111111501', '11111111-1111-1111-1111-111111111500', 'Anunțuri', 'anunturi', 'PAGE', '/resources/anunturi', 'PUBLIC', 'PUBLISHED', 51, 'Campaign', '{}'::jsonb),
  ('11111111-1111-1111-1111-111111111502', '11111111-1111-1111-1111-111111111500', 'Evenimente', 'evenimente', 'PAGE', '/resources/evenimente', 'PUBLIC', 'PUBLISHED', 52, 'Event', '{}'::jsonb),
  ('11111111-1111-1111-1111-111111111503', '11111111-1111-1111-1111-111111111500', 'Profesorii recomandă', 'profesorii-recomanda', 'PAGE', '/resources/profesorii-recomanda', 'PUBLIC', 'PUBLISHED', 53, 'Star', '{}'::jsonb)
ON CONFLICT (id) DO NOTHING;

-- Seed homepage hero, features, and spotlight cards
DELETE FROM homepage_blocks;

INSERT INTO homepage_blocks (id, block_type, title, subtitle, description, cta_label, cta_link, media, metadata, sort_order)
VALUES
  (gen_random_uuid(), 'HERO',
   'Physics Hub',
   'Curriculum digital pentru gimnaziu și liceu',
   'Transpunem resursele FizicaMD într-o platformă modernă cu lecții, fișiere și experimente pentru elevi, profesori și pasionați.',
   'Descoperă platforma', '/register',
   jsonb_build_object('image', '/hero-bg.svg', 'accent', '#7c3aed'),
   jsonb_build_object('secondaryCta', jsonb_build_object('label', 'Vezi resursele', 'link', '/search')),
   0),
  (gen_random_uuid(), 'FEATURE',
   'Curriculum actualizat',
   'Structurat pe clase și examene',
   'Planificări și colecții gata de predare sau învățare individuală pentru fiecare clasă.',
   'Vezi structura', '/resources/curriculum-liceal',
   '{}'::jsonb,
   jsonb_build_object('icon', 'MenuBook'),
   10),
  (gen_random_uuid(), 'FEATURE',
   'Resurse multimedia',
   'Video, PDF și simulări',
   'Laboratoare virtuale, galerii foto și arhive PDF pregătite pentru utilizare imediată.',
   'Explorează media', '/resources/experimente',
   '{}'::jsonb,
   jsonb_build_object('icon', 'Movie'),
   20),
  (gen_random_uuid(), 'FEATURE',
   'Comunitate activă',
   'Profesori și elevi conectați',
   'Evenimente live, sesiuni Q&A și recomandări din toată comunitatea FizicaMD.',
   'Intră în comunitate', '/resources/comunitate',
   '{}'::jsonb,
   jsonb_build_object('icon', 'Diversity3'),
   30),
  (gen_random_uuid(), 'SPOTLIGHT',
   'Pregătire Bacalaureat',
   'Teste rezolvate și sinteze pentru BAC.',
   NULL,
   'Vezi detalii',
   '/resources/bacalaureat',
   '{}'::jsonb,
   jsonb_build_object('navigationSlug', 'bacalaureat', 'badge', 'Popular'),
   40),
  (gen_random_uuid(), 'SPOTLIGHT',
   'Experimente video',
   'Colecție de experimente filmate + fișe tehnice.',
   NULL,
   'Vezi detalii',
   '/resources/experimente',
   '{}'::jsonb,
   jsonb_build_object('navigationSlug', 'experimente', 'badge', 'Video'),
   50),
  (gen_random_uuid(), 'SPOTLIGHT',
   'Olimpiade și concursuri',
   'Arhivă de subiecte și recomandări pentru pregătire.',
   NULL,
   'Vezi detalii',
   '/resources/olimpiade',
   '{}'::jsonb,
   jsonb_build_object('navigationSlug', 'olimpiade', 'badge', 'Concurs'),
   60);
